{{- define "main" -}}
{{- $paginator := .Paginator -}}

{{- $title := T .Title -}}
{{- if not $title -}}
{{- $title = .Title -}}
{{- end -}}
<section class="article header"><h1>{{- $title -}}</h1></section>
{{- if .Content -}}
<article class="article markdown-body">
  <!-- "{{.Content}}" pulls from the markdown content of the corresponding _index.md -->
  {{- .Content -}}
</article>
{{- end -}}

{{- if gt $paginator.TotalPages 0 -}}
<div class="note list">
  {{- range $paginator.Pages -}}
  <div class="flytag">
    <a class="note" href="{{- .RelPermalink -}}">
      <p class="note title">{{- .Title | safeHTML -}}</p>
    </a>
  </div>
  {{- end -}}
</div>
<script>
  var tags = document.getElementsByClassName('flytag');
  for (tag of tags) {
    var randomDelay = (Math.random()*0.5).toFixed(1);
    tag.style.animation = `0.4s ease ${randomDelay}s flipInX`;
  }
</script>
<style>
  div.note.list {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    flex-flow: row wrap;
    margin-bottom: 100px;
  }
  div.flytag {
    max-width: 200px;
    margin: 10px;
    border: 1px solid var(--light-theme-color-glyph);
    border-radius: 5px;
  }
  @media (prefers-color-scheme: dark) {
    div.flytag {
      border: 1px solid var(--dark-theme-color-glyph);
    }
  }

  div.flytag a {
    padding: 0 10px;
  }
  div.flytag a:hover {
    opacity: 0.5;
  }
</style>

{{- end -}}
{{- partial "pagination.html" $paginator -}}

{{- end -}}
