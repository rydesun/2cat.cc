{{- $js := "" -}}
{{- range site.Params.assets.js -}}
  {{- $customJS := resources.Get . -}}
  {{- if $customJS -}}
    {{- if eq $js "" -}}
      {{- $js = $customJS -}}
    {{- else -}}
      {{- $js = slice $js $customJS | resources.Concat (printf "%s.tmp_custom.js" .) -}}
    {{- end -}}
  {{- end -}}
{{- end -}}

{{- if ne $js "" -}}
  {{- $coreJS := slice $js ("" | resources.FromString "js/_core.js") | resources.Concat "js/core.js" -}}
  {{ if eq (getenv "HUGO_MODE") "dev" }}
    {{- $coreJS = $coreJS | resources.Fingerprint "sha384" -}}
  {{ else }}
    {{- $coreJS = $coreJS | resources.Minify | resources.Fingerprint "sha384" -}}
  {{ end }}
  <script src="{{- $coreJS.RelPermalink -}}" integrity="{{- $coreJS.Data.Integrity -}}"></script>
{{- end -}}

{{- partial "js.html" . -}}
