{{- $tocJS := "js/build/menu.js" -}}
{{- $commentsJS := "js/build/comments.js" -}}

{{ if eq (getenv "HUGO_MODE") "dev" }}
  {{ $tocJS = resources.Get $tocJS | fingerprint }}
  {{ $commentsJS = resources.Get $commentsJS | fingerprint }}
{{ else }}
  {{ $tocJS = resources.Get $tocJS | minify | fingerprint }}
  {{ $commentsJS = resources.Get $commentsJS | minify | fingerprint }}
{{ end }}


{{ if (not .Params.disableToc) }}
  <script src="{{ $tocJS.RelPermalink }}" type="text/javascript" async defer
    integrity="{{ $tocJS.Data.Integrity }}"></script>
{{- end -}}

{{- if or (eq .Params.comments true) (and (ne .Params.comments false) (eq site.Params.comments.enable true)) -}}
  <script src="{{ $commentsJS.RelPermalink }}" type="text/javascript" async defer
    integrity="{{ $commentsJS.Data.Integrity }}"></script>
{{- end -}}

{{ if (not .Params.disableStructuredData) }}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "BlogPosting",
      "author": {
        "@type": "Person",
        "name": "rydesun"
      },
      "datePublished": {{ .Date.Format "2006-01-02" }},
      "dateModified": {{ .Lastmod.Format "2006-01-02" }}
    }
  </script>
{{- end -}}
