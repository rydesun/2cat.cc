@import animation

\:root
  --block1-max-width: 980px
  --block2-max-width: 780px
  --light-theme-color-blob: #c586c6
  --light-theme-color-glyph: #943c95
  --light-theme-color-shadow: #9d90aa
  --light-theme-color-faint: rgba(0,0,0,.5)
  --light-theme-color-code-glyph: var(--light-theme-color-glyph)
  --light-theme-color-code-blob: #f0f0f0
  --light-theme-color-code-block-blob: #f0f0f0
  --dark-theme-color-blob: #705571
  --dark-theme-color-glyph: #a684a6
  --dark-theme-color-faint: rgba(255,255,255,.5)
  --dark-theme-color-code-glyph: var(--dark-theme-color-glyph)
  --dark-theme-color-code-blob: rgba(0,0,0,.1)
  --dark-theme-color-code-block-blob: rgba(0,0,0,.35)
  --dark-theme-color-link: #3e9dd7

@mixin dark-theme
  @media (prefers-color-scheme: dark)
    @content
@mixin user-default-theme
  \:root:not([data-user-color-scheme]) &
    @content
@mixin user-dark-theme
  \:root[data-user-color-scheme='dark'] &
    @content
@mixin user-light-theme
  \:root[data-user-color-scheme='light'] &
    @content

@mixin smart-dark-theme
  @include user-default-theme
    @include dark-theme
      @content
  @include user-dark-theme
    @content
@mixin smart-light-theme
  @content
  @include user-light-theme
    @content

@mixin max-width($width)
  @media screen and (max-width: $width)
    @content

@mixin margin-side($val)
  margin-left: $val
  margin-right: $val

\:root:not([data-user-color-scheme])
  @media (prefers-color-scheme: dark)
    @import 'notepadium-dark-style.scss'
    @import 'vendor/chroma-solarized-dark.scss'
\:root[data-user-color-scheme='dark']
  @import 'notepadium-dark-style.scss'
  @import 'vendor/chroma-solarized-dark.scss'

html
  font-family: -apple-system, BlinkMacSystemFont, "Noto Sans", "Segoe UI", Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Noto Sans CJK SC", "Microsoft YaHei", sans-serif, "Twemoji", "Noto Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Apple Color Emoji"

body
  @include smart-dark-theme
    background: #222831
  @include smart-light-theme
    background: #f0f0f0

div.warn
  color: white
  background: #7373cc
  text-align: center
  padding: 0.5rem
  margin-bottom: 1rem
  box-shadow: 0px 1px 8px #5454a0
  a
   color: pink

div.base-body
  max-width: unset
  > *
    @include margin-side(auto)
    max-width: var(--block2-max-width)
  div#content
    @include margin-side(auto)
    max-width: var(--block1-max-width)
    > ul
      @include margin-side(auto)
      max-width: var(--block2-max-width)
      @include max-width(500px)
        @include margin-side(-20px)
    section.article.discussion
      @include margin-side(auto)
      max-width: var(--block2-max-width)

section#header
  border: none
  div.site.slogan
    display: none

section#header div.header
  span.left-side span.site.name
    padding: 0.4rem 0.7rem
    border-radius: 6px
    color: white
    @include smart-light-theme
      box-shadow: 1px 1px 3px var(--light-theme-color-shadow)
      background-color: var(--light-theme-color-blob)
    @include smart-dark-theme
      box-shadow: none
      background-color: var(--dark-theme-color-blob)

  span.right-side
    text-align: right
    @include max-width(450px)
      vertical-align: -2.3rem
    div.nav.wrap
      display: inline-block
      vertical-align: middle
      @include max-width(450px)
        display: inline
      nav
        @include max-width(450px)
          margin-bottom: 0.5rem
      a
        @include smart-light-theme
          color: var(--light-theme-color-glyph)
        @include smart-dark-theme
          color: var(--dark-theme-color-glyph)
    div#button-group
      display: inline-block
      button#colorscheme-switcher
        display: inline-block
        padding: 0.1rem 0.4rem
        border-radius: 5px
        text-decoration: none
        &::-moz-focus-inner
          border: 0
        &:before
          vertical-align: -0.24rem
          content: ""
          display: inline-block
          height: 1rem
          width: 1rem
          background-size: 1rem 1rem
          background-repeat: no-repeat
        @include smart-light-theme
          color: var(--light-theme-color-glyph)
          background: white
          border: 2px solid var(--light-theme-color-blob)
          &:before
            background-image: url(/images/light-indicator.1.svg)
        @include smart-dark-theme
          color: var(--dark-theme-color-glyph)
          background: #292929
          border: 2px solid var(--dark-theme-color-blob)
          &:before
            background-image: url(/images/dark-indicator.1.svg)
        @include max-width(450px)
          margin-right: 10px

.labels
  a.category
    border: none // remove wired border
    @include smart-light-theme
      background-color: var(--light-theme-color-blob)
    @include smart-dark-theme
      background-color: var(--dark-theme-color-blob)
  a.tag
    @include smart-light-theme
      color: var(--light-theme-color-glyph)
    @include smart-dark-theme
      color: var(--dark-theme-color-glyph)

// ==== index page ==== //

div#content ul.note.list li.item
  box-shadow: none
  background: inherit
  padding-bottom: 8px
  &:hover
    box-shadow: 1px 1px 5px 3px rgba(0,0,0,.12)
    & a.note
      opacity: 1
    @include smart-light-theme
      background: white
    @include smart-dark-theme
      background: #393e46

// ==== post page ==== //

div.article-container
  box-shadow: 1px 1px 5px 3px rgba(0,0,0,.12)

article.article.markdown-body
  @include smart-light-theme
    color: #222
  @include smart-dark-theme
    color: rgba(255,255,255,0.65)
  a
    @include smart-light-theme
    @include smart-dark-theme
      color: var(--dark-theme-color-link)
  p code // exclude fenced code block
    hyphens: none
    padding: 0.1rem 0.3rem
    border-radius: 3px
    @include smart-light-theme
      color: var(--light-theme-color-code-glyph)
      background-color: var(--light-theme-color-code-blob)
    @include smart-dark-theme
      color: var(--dark-theme-color-code-glyph)
      background-color: var(--dark-theme-color-code-blob)
  pre
    @include smart-light-theme
      background-color: var(--light-theme-color-code-block-blob)
    @include smart-dark-theme
      border: none
      background-color: var(--dark-theme-color-code-block-blob)
  blockquote
    padding: 0.35em
    @include smart-light-theme
      border-left: 6px solid var(--light-theme-color-blob)
    @include smart-dark-theme
      border-left: 6px solid var(--dark-theme-color-blob)

section.article.license
  text-align: right
  font-size: 0.8rem
  @include smart-light-theme
    color: var(--light-theme-color-faint)
  @include smart-dark-theme
    color: var(--dark-theme-color-faint)

section#footer
  a
    @include smart-light-theme
    @include smart-dark-theme
      color: var(--dark-theme-color-link)
